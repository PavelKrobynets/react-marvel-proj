"use strict";(self.webpackChunkreact_marvel_proj=self.webpackChunkreact_marvel_proj||[]).push([[909],{523:(e,s,a)=>{a.d(s,{A:()=>r});var c=a(579);function r(){return(0,c.jsx)("div",{className:"errorMessage",children:(0,c.jsx)("img",{src:"https://media.tenor.com/8ND8TbjZqh0AAAAi/error.gif",alt:"error"})})}},159:(e,s,a)=>{a.r(s),a.d(s,{default:()=>v});var c=a(43),r=a(591);const t=a.p+"static/media/mjolnir.61f31e1809f12183a524.png";var n=a(897),i=a(656),o=a(579);function l(){const[e,s]=(0,c.useState)({}),{getCharacter:a,clearError:r,process:l,setProcess:d}=(0,n.A)();(0,c.useEffect)((()=>{u()}),[]);const m=e=>{s(e)},u=()=>{r();const e=Math.floor(400*Math.random()+1011e3);a(e).then(m).then((()=>{d("confirmed")}))};return(0,o.jsxs)("div",{className:"randomchar",children:[(0,i.A)(!1,l,h,e),(0,o.jsxs)("div",{className:"randomchar__static",children:[(0,o.jsxs)("p",{className:"randomchar__title",children:["Random character for today!",(0,o.jsx)("br",{}),"Do you want to get to know him better?"]}),(0,o.jsx)("p",{className:"randomchar__title",children:"Or choose another one"}),(0,o.jsx)("button",{className:"button button__main",onClick:u,children:(0,o.jsx)("div",{className:"inner",children:"try it"})}),(0,o.jsx)("img",{src:t,alt:"mjolnir",className:"randomchar__decoration"})]})]})}const h=e=>{let{name:s,description:a,thumbnail:c,homepage:r,wiki:t}=e;return(0,o.jsxs)("div",{className:"randomchar__block",children:[(0,o.jsx)("img",{src:c,alt:"Random character",className:"randomchar__img",style:"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?{objectFit:"fill"}:{objectFit:"cover"}}),(0,o.jsxs)("div",{className:"randomchar__info",children:[(0,o.jsx)("p",{className:"randomchar__name",children:s}),(0,o.jsx)("p",{className:"randomchar__descr",children:a}),(0,o.jsxs)("div",{className:"randomchar__btns",children:[(0,o.jsx)("a",{href:r,className:"button button__main",children:(0,o.jsx)("div",{className:"inner",children:"homepage"})}),(0,o.jsx)("a",{href:t,className:"button button__secondary",children:(0,o.jsx)("div",{className:"inner",children:"Wiki"})})]})]})]})};function d(e){const[s,a]=(0,c.useState)([]),[r,t]=(0,c.useState)(9),{getAllCharacters:l,loadMore:h,listLoaded:d,process:m,setProcess:u}=(0,n.A)();(0,c.useEffect)((()=>{_(r,!1)}),[]);const _=(e,s)=>{l(e,s).then(a).then((()=>u("confirmed")))},j=(0,c.useRef)([]),x=e=>{j.current.forEach((e=>e.classList.remove("char__item_selected"))),j.current[e].classList.add("char__item_selected"),j.current[e].focus()};return(0,o.jsxs)("div",{className:"char__list",children:[(0,i.A)(h,m,(()=>function(s){const a=r,c=s.map(((s,a)=>(0,o.jsxs)("li",{className:"char__item",ref:e=>j.current[a]=e,onClick:c=>{e.onCharSelected(s.id),x(a)},onKeyDownCapture:c=>{" "!==c.key&&"Enter"!==c.key||(e.onCharSelected(s.id),x(a))},children:[(0,o.jsx)("img",{src:s.thumbnail,alt:"abyss",style:"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===s.thumbnail?{objectFit:"fill"}:{objectFit:"cover"}}),(0,o.jsx)("div",{className:"char__name",children:s.name})]},s.id))).slice(0,a);return(0,o.jsx)("ul",{className:"char__grid",children:c})}(s))),d?(0,o.jsx)("button",{className:"button button__main button__long button__load",onClick:()=>(()=>{const e=r+9;t(e),_(e,!0),console.log("loaded")})(),style:!0===h?{animation:"glowing 1300ms infinite"}:{animation:"glowing"},children:(0,o.jsx)("div",{className:"inner",children:"load more"})}):null]})}const m=e=>{let{name:s,description:a,thumbnail:c,homepage:r,wiki:t,comics:n}=e;const i=(0,o.jsx)(u,{comics:n});return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)("div",{className:"char__basics",children:[(0,o.jsx)("img",{src:c,alt:"abyss",style:"http://i.annihil.us/u/prod/marvel/i/mg/b/40/image_not_available.jpg"===c?{objectFit:"fill"}:{objectFit:"cover"}}),(0,o.jsxs)("div",{children:[(0,o.jsx)("div",{className:"char__info-name",children:s}),(0,o.jsxs)("div",{className:"char__btns",children:[(0,o.jsx)("a",{href:r,className:"button button__main",children:(0,o.jsx)("div",{className:"inner",children:"homepage"})}),(0,o.jsx)("a",{href:t,className:"button button__secondary",children:(0,o.jsx)("div",{className:"inner",children:"wiki"})})]})]})]}),(0,o.jsx)("div",{className:"char__descr",children:a}),(0,o.jsx)("div",{className:"char__comics",children:"Comics:"}),(0,o.jsx)("ul",{className:"char__comics-list",children:0===n.length?"No comics with this character":i})]})},u=e=>{let{comics:s}=e;return s.map(((e,s)=>(0,o.jsx)("li",{className:"char__comics-item",children:e.name},s))).slice(0,10)},_=function(e){const[s,a]=(0,c.useState)(null),{getCharacter:r,clearError:t,process:l,setProcess:h}=(0,n.A)();(0,c.useEffect)((()=>{u(),console.log("change")}),[e.charId]);const d=e=>{a(e)},u=()=>{const{charId:s}=e;s&&(t(),r(s).then(d).then((()=>h("confirmed"))))};return(0,o.jsx)("div",{className:"char__info",children:(0,i.A)(!1,l,m,s)})};var j=a(523);class x extends c.Component{constructor(){super(...arguments),this.state={error:!1}}componentDidCatch(e,s){console.log(e,s),this.setState({error:!0})}render(){return this.state.error?(0,o.jsx)(j.A,{}):this.props.children}}var p=a(858),g=a(475);function b(){const[e,s]=(0,c.useState)(null),{getCharacterByName:a}=(0,n.A)(),{register:r,handleSubmit:t,formState:{errors:i}}=(0,p.mN)(),l=e?e.length>0?(0,o.jsxs)("div",{className:"char__search-wrapper",children:[(0,o.jsxs)("div",{className:"char__search-success",children:["There is! Visit ",e[0].name," page?"]}),(0,o.jsx)(g.N_,{to:"/characters/".concat(e[0].id),className:"button button__secondary",children:(0,o.jsx)("div",{className:"inner",children:"To page"})})]}):(0,o.jsx)("div",{className:"char__search-error",children:"The character was not found. Check the name and try again"}):null;return(0,o.jsxs)("div",{className:"char__search-form",children:[(0,o.jsxs)("form",{onSubmit:t((e=>{a(e.name).then(s),console.log(i)})),children:[(0,o.jsx)("label",{htmlFor:"name",className:"char__search-label",children:"Or find character by name:"}),(0,o.jsxs)("div",{className:"char__search-wrapper",children:[(0,o.jsx)("input",{placeholder:"Enter character name",...r("name",{required:!0,minLength:{value:3,message:"Char name should be longer than 3 symbols"}})}),(0,o.jsx)("button",{type:"submit",className:"button button__main",children:(0,o.jsx)("div",{className:"inner",children:"try it"})})]}),i.name?(0,o.jsx)("div",{className:"char__search-error",children:i.name.message}):null]}),l]})}function v(){const[e,s]=(0,c.useState)(null);return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsxs)(r.m,{children:[(0,o.jsx)("meta",{name:"description"}),(0,o.jsx)("title",{children:"Marvel information portal"})]}),(0,o.jsx)(x,{children:(0,o.jsx)(l,{})}),(0,o.jsxs)("div",{className:"char__content",children:[(0,o.jsx)(x,{children:(0,o.jsx)(d,{onCharSelected:e=>{s(e)}})}),(0,o.jsxs)("div",{className:"char__info-block",children:[(0,o.jsx)(x,{children:(0,o.jsx)(_,{charId:e})}),(0,o.jsx)(x,{children:(0,o.jsx)(b,{})})]})]})]})}},897:(e,s,a)=>{a.d(s,{A:()=>r});var c=a(43);function r(){const{request:e,clearError:s,process:a,setProcess:r}=function(){const[e,s]=(0,c.useState)("waiting"),a=(0,c.useCallback)((async function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"GET",c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,t=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{"Content-Type":"application/json"};r();try{const s=await fetch(e,{method:a,body:c,headers:t});if(!s.ok)throw new Error(s.statusText);return await s.json()}catch(n){throw s("error"),n}}),[]),r=(0,c.useCallback)((()=>{s("loading")}),[]);return{request:a,clearError:r,process:e,setProcess:s}}(),[t,n]=(0,c.useState)(!1),[i,o]=(0,c.useState)(!1),l="https://gateway.marvel.com:443/v1/public/",h="apikey=44c2cf8b8380798bbd06178bc0325db8";console.log("API Base URL:",l),console.log("API Key:",h);const d=e=>{const s=""!==e.description?e.description.slice(0,140)+"...":"Hero have no description";return{id:e.id,name:e.name,description:s,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,homepage:e.urls[0].url,wiki:e.urls[1].url,comics:e.comics.items}},m=e=>({id:e.id,name:e.title,thumbnail:e.thumbnail.path+"."+e.thumbnail.extension,price:e.prices[0].price?"".concat(e.prices[0].price,"$"):"not available",description:e.description||"There is no description",pageCount:e.pageCount?"".concat(e.pageCount," p."):"No info about pages",language:e.textObjects.language||"en-us"});return{getAllCharacters:async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;n(arguments.length>1?arguments[1]:void 0);const a=await e("".concat(l,"characters?limit=").concat(s,"&offset=210&").concat(h));return n(!1),o(!0),a.data.results.map(d)},getCharacter:async s=>{const a=await e("".concat(l,"characters/").concat(s,"?").concat(h));return d(a.data.results[0])},clearError:s,getAllComics:async function(){let s=arguments.length>0&&void 0!==arguments[0]?arguments[0]:9;n(arguments.length>1?arguments[1]:void 0);const a=await e("".concat(l,"comics?limit=").concat(s,"&offset=2&").concat(h));return n(!1),o(!0),a.data.results.map(m)},getComic:async s=>{const a=await e("".concat(l,"comics/").concat(s,"?").concat(h));return m(a.data.results[0])},loadMore:t,listLoaded:i,getCharacterByName:async s=>(await e("".concat(l,"characters?name=").concat(s,"&").concat(h))).data.results.map(d),process:a,setProcess:r}}},656:(e,s,a)=>{a.d(s,{A:()=>i});var c=a(579);function r(){return(0,c.jsx)("div",{className:"loader"})}var t=a(523);const n=()=>(0,c.jsxs)(c.Fragment,{children:[(0,c.jsx)("p",{className:"char__select",children:"Please select a character to see information"}),(0,c.jsxs)("div",{className:"skeleton",children:[(0,c.jsxs)("div",{className:"pulse skeleton__header",children:[(0,c.jsx)("div",{className:"pulse skeleton__circle"}),(0,c.jsx)("div",{className:"pulse skeleton__mini"})]}),(0,c.jsx)("div",{className:"pulse skeleton__block"}),(0,c.jsx)("div",{className:"pulse skeleton__block"}),(0,c.jsx)("div",{className:"pulse skeleton__block"})]})]});function i(e,s,a,i){switch(s){case"waiting":return(0,c.jsx)(n,{});case"loading":return e?(0,c.jsx)(a,{...i}):(0,c.jsx)(r,{});case"confirmed":return(0,c.jsx)(a,{...i});case"error":return(0,c.jsx)(t.A,{});default:throw new Error("Unexpected process state")}}}}]);
//# sourceMappingURL=909.0ed77ddc.chunk.js.map